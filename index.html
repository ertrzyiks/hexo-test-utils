<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Home - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-core.html">core</a><ul class='methods'><li data-type='method'><a href="module-core.html#.createSandbox">createSandbox</a></li><li data-type='method'><a href="module-core.html#.init">init</a></li><li data-type='method'><a href="module-core.html#.mockConfig">mockConfig</a></li><li data-type='method'><a href="module-core.html#.process">process</a></li></ul></li><li><a href="module-helpers.html">helpers</a><ul class='methods'><li data-type='method'><a href="module-helpers.html#.getHelper">getHelper</a></li><li data-type='method'><a href="module-helpers.html#.hasHelper">hasHelper</a></li></ul></li><li><a href="module-routing.html">routing</a><ul class='methods'><li data-type='method'><a href="module-routing.html#.contentFor">contentFor</a></li><li data-type='method'><a href="module-routing.html#.hasRoute">hasRoute</a></li></ul></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<div id="main">
    

    



    









    


    <section class="readme">
        <article><h1>hexo-test-utils</h1><p><a href="https://travis-ci.org/ertrzyiks/hexo-test-utils"><img src="https://travis-ci.org/ertrzyiks/hexo-test-utils.svg?branch=master" alt="Build Status"></a></p>
<p><a href="https://github.com/hexojs/hexo">Hexo</a> is quite easy to write tests for, but the needed boilerplate code can be a barrier.
This packages provides a set of utils to simplify testing Hexo plugins.</p>
<p>Offered features:</p>
<ul>
<li>Sandbox environment</li>
<li>high level functions for Hexo internals</li>
<li>ECMAScript5 compatibility</li>
</ul>
<h2>Installation</h2><pre class="prettyprint source"><code>npm install hexo-test-utils</code></pre><h2>Sandbox</h2><p>The main feature is a Sandbox. It allows to create an isolated environment of Hexo blog. Combined
with a fixture, it's easy to prepare all need files, process the blog and assert the output.</p>
<p>To create a Sandbox instance, first you need to create a factory with <code>createSandbox</code>:</p>
<pre class="prettyprint source lang-js"><code>const {createSandbox} = require('hexo-test-utils')
const Hexo = require('hexo')
const path = require('path')

const sandbox = createSandbox(Hexo, {
  fixture_folder: path.join(__dirname, '..', 'fixtures'),
  plugins: [
    path.join(__dirname, '..', 'src')
  ]
})</code></pre><p>Now, the <code>sandbox</code> is a function which returns a new context - an instance of Hexo blog which is ready for processing.</p>
<h3>Using fixture folder</h3><p>If <code>fixture_folder</code> is set, the factory function accepts one parameter, name of the fixture folder where live all fixture files.</p>
<p>To prepare a fixture with one post, create folder <code>./fixtures/one-post/source/_posts/</code> and put the markdown file there.</p>
<pre class="prettyprint source lang-js"><code>const context = sandbox('one-post')</code></pre><p>At this moment, the Hexo blog is created, but no files are loaded. To start the loading process, call <code>process</code> method.</p>
<pre class="prettyprint source"><code>const {process} = require('hexo-test-utils/core')

process(context).then(() => {
  // Hexo processed the ./fixtures/one-post/ folder as a blog
})</code></pre><p>Now you can start check the behavior of your plugin.</p>
<blockquote>
<p>Note: no files were actually saved on the hard drive, all the process happened in memory.</p>
</blockquote>
<h3>Empty Sandbox</h3><p>You can skip <code>fixture_folder</code> if you don't need any files to exists, for example when testing a view helper in isolation.
The factory function will have no parameters then and the Sandbox will be an empty Hexo project - no posts, no theme, no assets.</p>
<p>You can still use Hexo API to provide fixtures programmatically.</p>
<h2>Documentation</h2><p>Read API documentation <a href="https://ertrzyiks.github.io/hexo-test-utils/">here</a></p></article>
    </section>






</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Wed Jun 13 2018 18:48:56 GMT+0200 (CEST) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>